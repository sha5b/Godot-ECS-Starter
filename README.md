# Godot ECS Starter Project

This project provides a basic framework for building a game using an Entity-Component-System (ECS) inspired approach within the Godot Engine. It focuses on demonstrating decoupled systems for managing world state, terrain, weather, and events.

## Core Systems

*   **`core/WorldState.gd`**: Manages the global game time and potentially other global environmental variables (like temperature). It emits signals when time progresses.
*   **`core/EventBus.gd`**: A central singleton node that defines and manages signals for communication between different systems (Weather, Terrain, Camera, Time). This promotes decoupling, allowing systems to react to events without direct dependencies on each other.

## Terrain System

*   **`terrain/TerrainManager.gd`**: Responsible for procedurally generating the world's terrain data.
    *   Uses `FastNoiseLite` to generate heightmaps and determine biome types (water, grass, dirt, rock) based on noise values and thresholds.
    *   Also uses a separate noise instance to determine the placement of objects (like trees, bushes, rocks) based on biome and density settings.
    *   Generates the entire world data on startup.
*   **`terrain/TerrainRenderer.gd`**: Handles the visual representation of the terrain generated by `TerrainManager`.
    *   Creates an `ArrayMesh` using `SurfaceTool` to draw the terrain efficiently.
    *   Calculates vertex positions based on map coordinates and terrain height, applying isometric projection.
    *   Applies colors to vertices based on the biome type and adds simple height-based shading.
    *   Spawns placeholder visual nodes (currently `ColorRect`s) for objects defined in `TerrainManager`.

## Weather System

*   **`weather/WeatherManager.gd`**: Controls the current weather conditions in the game.
    *   Manages transitions between different weather states (defined by `WeatherState` resources).
    *   Reacts to time updates from `WorldState` to potentially trigger weather changes over time.
    *   Uses the `EventBus` to notify other systems (e.g., rendering systems) about changes in weather.
*   **`weather/WeatherState.gd`**: A `Resource` script defining the properties of a specific weather condition.
    *   Includes parameters like precipitation type/intensity, wind, temperature modifier, cloud coverage, etc.
    *   These resources (`.tres` files like `clear.tres`, `cloudy.tres`) are used by the `WeatherManager` to define the active weather.
*   **`weather/CloudRenderer.gd`**: (Assumed functionality based on name) Likely handles the visual rendering of clouds based on the current `WeatherState`'s cloud coverage.

## Camera

*   **`camera/IsometricCamera.gd`**: Provides an isometric camera setup for viewing the world. (Details would require inspecting the script).

## How it Works

1.  The `Main.tscn` scene likely sets up the core systems (`WorldState`, `EventBus`) and instantiates managers like `TerrainManager` and `WeatherManager`.
2.  `TerrainManager` generates the world data (`terrain_data`, `object_placement_data`) upon starting (`_ready`).
3.  `TerrainRenderer` (a child of `TerrainManager`) is then called to create the visual mesh and place object nodes based on the generated data.
4.  `WorldState` continuously updates the game time in `_process`.
5.  `WeatherManager` listens for time updates and potentially initiates transitions between `WeatherState` resources based on its internal logic.
6.  When the weather changes, `WeatherManager` emits a signal via the `EventBus`. Other systems (like `CloudRenderer` or potentially `TerrainRenderer` for effects) can connect to these signals to react accordingly.

## Getting Started

1.  Ensure you have the Godot Engine (version compatible with the project, likely Godot 4.x).
2.  Clone or download this repository.
3.  Open the Godot Engine project manager.
4.  Click "Import" and navigate to the `project.godot` file in this repository.
5.  Once imported, open the project.
6.  Run the main scene (`Main.tscn`) to see the generated world.

## Key Files

*   `Main.tscn` / `Main.gd`: Main scene setup.
*   `core/EventBus.gd`: Global event signaler.
*   `core/WorldState.gd`: Global time and state manager.
*   `terrain/TerrainManager.gd`: Terrain data generation logic.
*   `terrain/TerrainRenderer.gd`: Terrain mesh and object visualization.
*   `weather/WeatherManager.gd`: Weather state control and transitions.
*   `weather/WeatherState.gd`: Resource defining weather properties.
*   `weather/states/*.tres`: Specific weather state definitions.
*   `camera/IsometricCamera.gd`: Isometric camera controller.
